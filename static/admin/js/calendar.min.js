function removeChildren(b){while(b.hasChildNodes()){b.removeChild(b.lastChild)}}function quickElement(){var c=document.createElement(arguments[0]);if(arguments[2]!=""&&arguments[2]!=null){var d=document.createTextNode(arguments[2]);c.appendChild(d)}var a=arguments.length;for(var b=3;b<a;b+=2){c.setAttribute(arguments[b],arguments[b+1])}arguments[1].appendChild(c);return c}var CalendarNamespace={monthsOfYear:gettext("January February March April May June July August September October November December").split(" "),daysOfWeek:gettext("S M T W T F S").split(" "),firstDayOfWeek:parseInt(get_format("FIRST_DAY_OF_WEEK")),isLeapYear:function(a){return(((a%4)==0)&&((a%100)!=0)||((a%400)==0))},getDaysInMonth:function(b,a){var c;if(b==1||b==3||b==5||b==7||b==8||b==10||b==12){c=31}else{if(b==4||b==6||b==9||b==11){c=30}else{if(b==2&&CalendarNamespace.isLeapYear(a)){c=29}else{c=28}}}return c},draw:function(s,j,n,e){var q=new Date();var r=q.getDate();var k=q.getMonth()+1;var h=q.getFullYear();var c="";s=parseInt(s);j=parseInt(j);var p=document.getElementById(n);removeChildren(p);var a=document.createElement("table");quickElement("caption",a,CalendarNamespace.monthsOfYear[s-1]+" "+j);var l=quickElement("tbody",a);var t=quickElement("tr",l);for(var o=0;o<7;o++){quickElement("th",t,CalendarNamespace.daysOfWeek[(o+CalendarNamespace.firstDayOfWeek)%7])}var d=new Date(j,s-1,1-CalendarNamespace.firstDayOfWeek).getDay();var f=CalendarNamespace.getDaysInMonth(s,j);t=quickElement("tr",l);for(var o=0;o<d;o++){var m=quickElement("td",t," ");m.style.backgroundColor="#f3f3f3"}var g=1;for(var o=d;g<=f;o++){if(o%7==0&&g!=1){t=quickElement("tr",l)}if((g==r)&&(s==k)&&(j==h)){c="today"}else{c=""}var b=quickElement("td",t,"","class",c);quickElement("a",b,g,"href","javascript:void("+e+"("+j+","+s+","+g+"));");g++}while(t.childNodes.length<7){var m=quickElement("td",t," ");m.style.backgroundColor="#f3f3f3"}p.appendChild(a)}};function Calendar(a,b){this.div_id=a;this.callback=b;this.today=new Date();this.currentMonth=this.today.getMonth()+1;this.currentYear=this.today.getFullYear()}Calendar.prototype={drawCurrent:function(){CalendarNamespace.draw(this.currentMonth,this.currentYear,this.div_id,this.callback)},drawDate:function(b,a){this.currentMonth=b;this.currentYear=a;this.drawCurrent()},drawPreviousMonth:function(){if(this.currentMonth==1){this.currentMonth=12;this.currentYear--}else{this.currentMonth--}this.drawCurrent()},drawNextMonth:function(){if(this.currentMonth==12){this.currentMonth=1;this.currentYear++}else{this.currentMonth++}this.drawCurrent()},drawPreviousYear:function(){this.currentYear--;this.drawCurrent()},drawNextYear:function(){this.currentYear++;this.drawCurrent()}};